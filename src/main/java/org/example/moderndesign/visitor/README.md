## 방문자 패턴 (Visitor Pattern)

- 객체 구조와 연산을 분리하여 새로운 연산을 기존 객체 수정 없이 추가할 수 있도록 하는 패턴
- 객체 타입과 Visitor 타입에 따라 실행 메서드가 결정
- 기존 코드 변경 없이 새로운 Visitor 구현체를 추가할 수 있도록 확장성 제공
- 더블 디스패치 : Fruit.java의 apply함수 확인

### 방문자 패턴의 장단점

- 장점 :
    - 새로운 연산 추가 용이
    - 관련 연산을 한 클래스에 집중
    - 복잡한 객체 구조 관리 효율적
- 단점 :
    - 새로운 객체 추가 시 모든 Visitor 수정 필요
    - 객체 캡슐화 위반 가능성 (Visitor가 자신의 내부 데이터에 접근할 수 있도록 Getter 메서드 등을 강제로 제공)
    - 코드 복잡도 증가

### 명시적 클래스 방식과 람다 방식 비교

- 명시적 클래스 방식 :
    - 계층적 구조 (명확한 역할 분담)
    - 새로운 Visitor 추가 용이 (Visitor 인터페이스 구현한 새로운 클래스를 추가 하면 됨)
    - 컴파일 타임 검증 가능
    - 복잡한 객체 구조로 인한 다양한 연산을 필요로 하는 시나리오에 적합
- 람다/함수형 방식 :
    - 평탄한 구조 (간결한 구현)
    - 기존 맵에 새로운 함수를 추가하거나, 별도의 맵을 생성 (discountVisitor Map을 별도로 생성 한다던지 등..)
    - 런타임 시 ClassCastException 발생 가능
    - 단순한 구조로 인한 빠른 프로토타이핑 시나리오에 적합
